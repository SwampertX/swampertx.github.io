<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.Core.Primitives</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-
This file document and export the main primitives of Cubical Agda. It
also defines some basic derived operations (composition and filling).

-}</a>
<a id="148" class="Symbol">{-#</a> <a id="152" class="Keyword">OPTIONS</a> <a id="160" class="Pragma">--cubical=no-glue</a> <a id="178" class="Pragma">--safe</a> <a id="185" class="Symbol">#-}</a>
<a id="189" class="Keyword">module</a> <a id="196" href="Cubical.Core.Primitives.html" class="Module">Cubical.Core.Primitives</a> <a id="220" class="Keyword">where</a>

<a id="227" class="Keyword">open</a> <a id="232" class="Keyword">import</a> <a id="239" href="Agda.Builtin.Cubical.Path.html" class="Module">Agda.Builtin.Cubical.Path</a> <a id="265" class="Keyword">public</a>
<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Agda.Builtin.Cubical.Sub.html" class="Module">Agda.Builtin.Cubical.Sub</a> <a id="309" class="Keyword">public</a>
  <a id="318" class="Keyword">renaming</a> <a id="327" class="Symbol">(</a><a id="328" href="Agda.Builtin.Cubical.Sub.html#381" class="Primitive">primSubOut</a> <a id="339" class="Symbol">to</a> <a id="342" class="Primitive">outS</a><a id="346" class="Symbol">)</a>
<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Agda.Primitive.Cubical.html" class="Module">Agda.Primitive.Cubical</a> <a id="383" class="Keyword">public</a>
  <a id="392" class="Keyword">renaming</a> <a id="401" class="Symbol">(</a> <a id="403" href="Agda.Primitive.Cubical.html#394" class="Primitive">primIMin</a>       <a id="418" class="Symbol">to</a> <a id="421" class="Primitive">_∧_</a>  <a id="426" class="Comment">-- I → I → I</a>
           <a id="450" class="Symbol">;</a> <a id="452" href="Agda.Primitive.Cubical.html#419" class="Primitive">primIMax</a>       <a id="467" class="Symbol">to</a> <a id="470" class="Primitive">_∨_</a>  <a id="475" class="Comment">-- I → I → I</a>
           <a id="499" class="Symbol">;</a> <a id="501" href="Agda.Primitive.Cubical.html#444" class="Primitive">primINeg</a>       <a id="516" class="Symbol">to</a> <a id="519" class="Primitive">~_</a>   <a id="524" class="Comment">-- I → I</a>
           <a id="544" class="Symbol">;</a> <a id="546" href="Agda.Primitive.Cubical.html#1176" class="Postulate">isOneEmpty</a>     <a id="561" class="Symbol">to</a> <a id="564" class="Postulate">empty</a>
           <a id="581" class="Symbol">;</a> <a id="583" href="Agda.Primitive.Cubical.html#1698" class="Primitive">primComp</a>       <a id="598" class="Symbol">to</a> <a id="601" class="Primitive">comp</a>
           <a id="617" class="Symbol">;</a> <a id="619" href="Agda.Primitive.Cubical.html#1925" class="Primitive">primHComp</a>      <a id="634" class="Symbol">to</a> <a id="637" class="Primitive">hcomp</a>
           <a id="654" class="Symbol">;</a> <a id="656" href="Agda.Primitive.Cubical.html#1852" class="Primitive">primTransp</a>     <a id="671" class="Symbol">to</a> <a id="674" class="Primitive">transp</a>
           <a id="692" class="Symbol">;</a> <a id="694" href="Agda.Primitive.Cubical.html#530" class="Postulate">itIsOne</a>        <a id="709" class="Symbol">to</a> <a id="712" class="Postulate">1=1</a> <a id="716" class="Symbol">)</a>

<a id="719" class="Comment">-- These two are to make sure all the primitives are loaded and ready</a>
<a id="789" class="Comment">-- to compute hcomp/transp for the universe.</a>
<a id="834" class="Comment">-- import Agda.Builtin.Cubical.Glue</a>
<a id="870" class="Comment">-- HCompU is already imported from Glue, and older Agda versions do</a>
<a id="938" class="Comment">-- not have it. So we comment it out for now.</a>
<a id="984" class="Keyword">import</a> <a id="991" href="Agda.Builtin.Cubical.HCompU.html" class="Module">Agda.Builtin.Cubical.HCompU</a>

<a id="1020" class="Keyword">open</a> <a id="1025" class="Keyword">import</a> <a id="1032" href="Agda.Primitive.html" class="Module">Agda.Primitive</a> <a id="1047" class="Keyword">public</a>
  <a id="1056" class="Keyword">using</a>    <a id="1065" class="Symbol">(</a> <a id="1067" href="Agda.Primitive.html#742" class="Postulate">Level</a>
           <a id="1084" class="Symbol">;</a> <a id="1086" href="Agda.Primitive.html#429" class="Primitive">SSet</a> <a id="1091" class="Symbol">)</a>
  <a id="1095" class="Keyword">renaming</a> <a id="1104" class="Symbol">(</a> <a id="1106" href="Agda.Primitive.html#915" class="Primitive">lzero</a> <a id="1112" class="Symbol">to</a> <a id="1115" class="Primitive">ℓ-zero</a>
           <a id="1133" class="Symbol">;</a> <a id="1135" href="Agda.Primitive.html#931" class="Primitive">lsuc</a>  <a id="1141" class="Symbol">to</a> <a id="1144" class="Primitive">ℓ-suc</a>
           <a id="1161" class="Symbol">;</a> <a id="1163" href="Agda.Primitive.html#961" class="Primitive Operator">_⊔_</a>   <a id="1169" class="Symbol">to</a> <a id="1172" class="Primitive Operator">ℓ-max</a>
           <a id="1189" class="Symbol">;</a> <a id="1191" href="Agda.Primitive.html#388" class="Primitive">Set</a>   <a id="1197" class="Symbol">to</a> <a id="1200" class="Primitive">Type</a>
           <a id="1216" class="Symbol">;</a> <a id="1218" href="Agda.Primitive.html#512" class="Primitive">Setω</a>  <a id="1224" class="Symbol">to</a> <a id="1227" class="Primitive">Typeω</a> <a id="1233" class="Symbol">)</a>
<a id="1235" class="Keyword">open</a> <a id="1240" class="Keyword">import</a> <a id="1247" href="Agda.Builtin.Sigma.html" class="Module">Agda.Builtin.Sigma</a> <a id="1266" class="Keyword">public</a>

<a id="1274" class="Comment">-- This file document the Cubical Agda primitives. The primitives</a>
<a id="1340" class="Comment">-- themselves are bound by the Agda files imported above.</a>

<a id="1399" class="Comment">-- * The Interval</a>
<a id="1417" class="Comment">-- I : IUniv</a>

<a id="1431" class="Comment">-- Endpoints, Connections, Reversal</a>
<a id="1467" class="Comment">-- i0 i1   : I</a>
<a id="1482" class="Comment">-- _∧_ _∨_ : I → I → I</a>
<a id="1505" class="Comment">-- ~_      : I → I</a>


<a id="1526" class="Comment">-- * Dependent path type. (Path over Path)</a>

<a id="1570" class="Comment">-- Introduced with lambda abstraction and eliminated with application,</a>
<a id="1641" class="Comment">-- just like function types.</a>

<a id="1671" class="Comment">-- PathP : ∀ {ℓ} (A : I → Type ℓ) → A i0 → A i1 → Type ℓ</a>

<a id="1729" class="Keyword">infix</a> <a id="1735" class="Number">4</a> <a id="1737" href="Cubical.Core.Primitives.html#1745" class="Function Operator">_[_≡_]</a>

<a id="_[_≡_]"></a><a id="1745" href="Cubical.Core.Primitives.html#1745" class="Function Operator">_[_≡_]</a> <a id="1752" class="Symbol">:</a> <a id="1754" class="Symbol">∀</a> <a id="1756" class="Symbol">{</a><a id="1757" href="Cubical.Core.Primitives.html#1757" class="Bound">ℓ</a><a id="1758" class="Symbol">}</a> <a id="1760" class="Symbol">(</a><a id="1761" href="Cubical.Core.Primitives.html#1761" class="Bound">A</a> <a id="1763" class="Symbol">:</a> <a id="1765" href="Agda.Primitive.Cubical.html#151" class="Datatype">I</a> <a id="1767" class="Symbol">→</a> <a id="1769" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="1774" href="Cubical.Core.Primitives.html#1757" class="Bound">ℓ</a><a id="1775" class="Symbol">)</a> <a id="1777" class="Symbol">→</a> <a id="1779" href="Cubical.Core.Primitives.html#1761" class="Bound">A</a> <a id="1781" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a> <a id="1784" class="Symbol">→</a> <a id="1786" href="Cubical.Core.Primitives.html#1761" class="Bound">A</a> <a id="1788" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a> <a id="1791" class="Symbol">→</a> <a id="1793" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="1798" href="Cubical.Core.Primitives.html#1757" class="Bound">ℓ</a>
<a id="1800" href="Cubical.Core.Primitives.html#1745" class="Function Operator">_[_≡_]</a> <a id="1807" class="Symbol">=</a> <a id="1809" href="Agda.Primitive.Cubical.html#2014" class="Postulate">PathP</a>


<a id="1817" class="Comment">-- Non dependent path types</a>

<a id="Path"></a><a id="1846" href="Cubical.Core.Primitives.html#1846" class="Function">Path</a> <a id="1851" class="Symbol">:</a> <a id="1853" class="Symbol">∀</a> <a id="1855" class="Symbol">{</a><a id="1856" href="Cubical.Core.Primitives.html#1856" class="Bound">ℓ</a><a id="1857" class="Symbol">}</a> <a id="1859" class="Symbol">(</a><a id="1860" href="Cubical.Core.Primitives.html#1860" class="Bound">A</a> <a id="1862" class="Symbol">:</a> <a id="1864" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="1869" href="Cubical.Core.Primitives.html#1856" class="Bound">ℓ</a><a id="1870" class="Symbol">)</a> <a id="1872" class="Symbol">→</a> <a id="1874" href="Cubical.Core.Primitives.html#1860" class="Bound">A</a> <a id="1876" class="Symbol">→</a> <a id="1878" href="Cubical.Core.Primitives.html#1860" class="Bound">A</a> <a id="1880" class="Symbol">→</a> <a id="1882" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="1887" href="Cubical.Core.Primitives.html#1856" class="Bound">ℓ</a>
<a id="1889" href="Cubical.Core.Primitives.html#1846" class="Function">Path</a> <a id="1894" href="Cubical.Core.Primitives.html#1894" class="Bound">A</a> <a id="1896" href="Cubical.Core.Primitives.html#1896" class="Bound">a</a> <a id="1898" href="Cubical.Core.Primitives.html#1898" class="Bound">b</a> <a id="1900" class="Symbol">=</a> <a id="1902" href="Agda.Primitive.Cubical.html#2014" class="Postulate">PathP</a> <a id="1908" class="Symbol">(λ</a> <a id="1911" href="Cubical.Core.Primitives.html#1911" class="Bound">_</a> <a id="1913" class="Symbol">→</a> <a id="1915" href="Cubical.Core.Primitives.html#1894" class="Bound">A</a><a id="1916" class="Symbol">)</a> <a id="1918" href="Cubical.Core.Primitives.html#1896" class="Bound">a</a> <a id="1920" href="Cubical.Core.Primitives.html#1898" class="Bound">b</a>

<a id="1923" class="Comment">-- PathP (λ i → A) x y gets printed as x ≡ y when A does not mention i.</a>
<a id="1995" class="Comment">--  _≡_ : ∀ {ℓ} {A : Type ℓ} → A → A → Type ℓ</a>
<a id="2041" class="Comment">--  _≡_ {A = A} = PathP (λ _ → A)</a>


<a id="2077" class="Comment">-- * @IsOne r@ represents the constraint &quot;r = i1&quot;.</a>
<a id="2128" class="Comment">-- Often we will use &quot;φ&quot; for elements of I, when we intend to use them</a>
<a id="2199" class="Comment">-- with IsOne (or Partial[P]).</a>
<a id="2230" class="Comment">-- IsOne : I → SSet ℓ-zero</a>

<a id="2258" class="Comment">-- i1 is indeed equal to i1.</a>
<a id="2287" class="Comment">-- 1=1 : IsOne i1</a>


<a id="2307" class="Comment">-- * Types of partial elements, and their dependent version.</a>

<a id="2369" class="Comment">-- &quot;Partial φ A&quot; is a special version of &quot;IsOne φ → A&quot; with a more</a>
<a id="2436" class="Comment">-- extensional judgmental equality.</a>
<a id="2472" class="Comment">-- &quot;PartialP φ A&quot; allows &quot;A&quot; to be defined only on &quot;φ&quot;.</a>

<a id="2529" class="Comment">-- Partial : ∀ {ℓ} → I → Type ℓ → SSet ℓ</a>
<a id="2570" class="Comment">-- PartialP : ∀ {ℓ} → (φ : I) → Partial φ (Type ℓ) → SSet ℓ</a>

<a id="2631" class="Comment">-- Partial elements are introduced by pattern matching with (r = i0)</a>
<a id="2700" class="Comment">-- or (r = i1) constraints, like so:</a>

<a id="2738" class="Keyword">private</a>
  <a id="sys"></a><a id="2748" href="Cubical.Core.Primitives.html#2748" class="Function">sys</a> <a id="2752" class="Symbol">:</a> <a id="2754" class="Symbol">∀</a> <a id="2756" href="Cubical.Core.Primitives.html#2756" class="Bound">i</a> <a id="2758" class="Symbol">→</a> <a id="2760" href="Agda.Primitive.Cubical.html#1116" class="Primitive">Partial</a> <a id="2768" class="Symbol">(</a><a id="2769" href="Cubical.Core.Primitives.html#2756" class="Bound">i</a> <a id="2771" href="Cubical.Core.Primitives.html#470" class="Primitive Operator">∨</a> <a id="2773" href="Cubical.Core.Primitives.html#519" class="Primitive Operator">~</a> <a id="2775" href="Cubical.Core.Primitives.html#2756" class="Bound">i</a><a id="2776" class="Symbol">)</a> <a id="2778" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₁</a>
  <a id="2786" href="Cubical.Core.Primitives.html#2748" class="Function">sys</a> <a id="2790" href="Cubical.Core.Primitives.html#2790" class="Bound">i</a> <a id="2792" class="Symbol">(</a><a id="2793" href="Cubical.Core.Primitives.html#2790" class="Bound">i</a> <a id="2795" class="Symbol">=</a> <a id="2797" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a><a id="2799" class="Symbol">)</a> <a id="2801" class="Symbol">=</a> <a id="2803" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a>
  <a id="2811" href="Cubical.Core.Primitives.html#2748" class="Function">sys</a> <a id="2815" href="Cubical.Core.Primitives.html#2815" class="Bound">i</a> <a id="2817" class="Symbol">(</a><a id="2818" href="Cubical.Core.Primitives.html#2815" class="Bound">i</a> <a id="2820" class="Symbol">=</a> <a id="2822" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a><a id="2824" class="Symbol">)</a> <a id="2826" class="Symbol">=</a> <a id="2828" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a> <a id="2834" class="Symbol">→</a> <a id="2836" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a>

  <a id="2845" class="Comment">-- It also works with pattern matching lambdas:</a>
  <a id="2895" class="Comment">--  http://wiki.portal.chalmers.se/agda/pmwiki.php?n=ReferenceManual.PatternMatchingLambdas</a>
  <a id="sys&#39;"></a><a id="2989" href="Cubical.Core.Primitives.html#2989" class="Function">sys&#39;</a> <a id="2994" class="Symbol">:</a> <a id="2996" class="Symbol">∀</a> <a id="2998" href="Cubical.Core.Primitives.html#2998" class="Bound">i</a> <a id="3000" class="Symbol">→</a> <a id="3002" href="Agda.Primitive.Cubical.html#1116" class="Primitive">Partial</a> <a id="3010" class="Symbol">(</a><a id="3011" href="Cubical.Core.Primitives.html#2998" class="Bound">i</a> <a id="3013" href="Cubical.Core.Primitives.html#470" class="Primitive Operator">∨</a> <a id="3015" href="Cubical.Core.Primitives.html#519" class="Primitive Operator">~</a> <a id="3017" href="Cubical.Core.Primitives.html#2998" class="Bound">i</a><a id="3018" class="Symbol">)</a> <a id="3020" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₁</a>
  <a id="3028" href="Cubical.Core.Primitives.html#2989" class="Function">sys&#39;</a> <a id="3033" href="Cubical.Core.Primitives.html#3033" class="Bound">i</a> <a id="3035" class="Symbol">=</a> <a id="3037" class="Symbol">λ</a> <a id="3039" class="Symbol">{</a> <a id="3041" class="Symbol">(</a><a id="3042" href="Cubical.Core.Primitives.html#3033" class="Bound">i</a> <a id="3044" class="Symbol">=</a> <a id="3046" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a><a id="3048" class="Symbol">)</a> <a id="3050" class="Symbol">→</a> <a id="3052" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a>
             <a id="3071" class="Symbol">;</a> <a id="3073" class="Symbol">(</a><a id="3074" href="Cubical.Core.Primitives.html#3033" class="Bound">i</a> <a id="3076" class="Symbol">=</a> <a id="3078" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a><a id="3080" class="Symbol">)</a> <a id="3082" class="Symbol">→</a> <a id="3084" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a> <a id="3090" class="Symbol">→</a> <a id="3092" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a>
             <a id="3111" class="Symbol">}</a>

  <a id="3116" class="Comment">-- When the cases overlap they must agree.</a>
  <a id="sys2"></a><a id="3161" href="Cubical.Core.Primitives.html#3161" class="Function">sys2</a> <a id="3166" class="Symbol">:</a> <a id="3168" class="Symbol">∀</a> <a id="3170" href="Cubical.Core.Primitives.html#3170" class="Bound">i</a> <a id="3172" href="Cubical.Core.Primitives.html#3172" class="Bound">j</a> <a id="3174" class="Symbol">→</a> <a id="3176" href="Agda.Primitive.Cubical.html#1116" class="Primitive">Partial</a> <a id="3184" class="Symbol">(</a><a id="3185" href="Cubical.Core.Primitives.html#3170" class="Bound">i</a> <a id="3187" href="Cubical.Core.Primitives.html#470" class="Primitive Operator">∨</a> <a id="3189" class="Symbol">(</a><a id="3190" href="Cubical.Core.Primitives.html#3170" class="Bound">i</a> <a id="3192" href="Cubical.Core.Primitives.html#421" class="Primitive Operator">∧</a> <a id="3194" href="Cubical.Core.Primitives.html#3172" class="Bound">j</a><a id="3195" class="Symbol">))</a> <a id="3198" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₁</a>
  <a id="3206" href="Cubical.Core.Primitives.html#3161" class="Function">sys2</a> <a id="3211" href="Cubical.Core.Primitives.html#3211" class="Bound">i</a> <a id="3213" href="Cubical.Core.Primitives.html#3213" class="Bound">j</a> <a id="3215" class="Symbol">=</a> <a id="3217" class="Symbol">λ</a> <a id="3219" class="Symbol">{</a> <a id="3221" class="Symbol">(</a><a id="3222" href="Cubical.Core.Primitives.html#3211" class="Bound">i</a> <a id="3224" class="Symbol">=</a> <a id="3226" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a><a id="3228" class="Symbol">)</a>          <a id="3239" class="Symbol">→</a> <a id="3241" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a>
               <a id="3262" class="Symbol">;</a> <a id="3264" class="Symbol">(</a><a id="3265" href="Cubical.Core.Primitives.html#3211" class="Bound">i</a> <a id="3267" class="Symbol">=</a> <a id="3269" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a><a id="3271" class="Symbol">)</a> <a id="3273" class="Symbol">(</a><a id="3274" href="Cubical.Core.Primitives.html#3213" class="Bound">j</a> <a id="3276" class="Symbol">=</a> <a id="3278" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a><a id="3280" class="Symbol">)</a> <a id="3282" class="Symbol">→</a> <a id="3284" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₀</a>
               <a id="3305" class="Symbol">}</a>

  <a id="3310" class="Comment">-- (i0 = i1) is actually absurd.</a>
  <a id="sys3"></a><a id="3345" href="Cubical.Core.Primitives.html#3345" class="Function">sys3</a> <a id="3350" class="Symbol">:</a> <a id="3352" href="Agda.Primitive.Cubical.html#1116" class="Primitive">Partial</a> <a id="3360" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a> <a id="3363" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type₁</a>
  <a id="3371" href="Cubical.Core.Primitives.html#3345" class="Function">sys3</a> <a id="3376" class="Symbol">=</a> <a id="3378" class="Symbol">λ</a> <a id="3380" class="Symbol">{</a> <a id="3382" class="Symbol">()</a> <a id="3385" class="Symbol">}</a>


<a id="3389" class="Comment">-- * There are cubical subtypes as in CCHM. Note that these are not</a>
<a id="3457" class="Comment">-- fibrant (hence in SSet ℓ):</a>

<a id="_[_↦_]"></a><a id="3488" href="Cubical.Core.Primitives.html#3488" class="Function Operator">_[_↦_]</a> <a id="3495" class="Symbol">:</a> <a id="3497" class="Symbol">∀</a> <a id="3499" class="Symbol">{</a><a id="3500" href="Cubical.Core.Primitives.html#3500" class="Bound">ℓ</a><a id="3501" class="Symbol">}</a> <a id="3503" class="Symbol">(</a><a id="3504" href="Cubical.Core.Primitives.html#3504" class="Bound">A</a> <a id="3506" class="Symbol">:</a> <a id="3508" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="3513" href="Cubical.Core.Primitives.html#3500" class="Bound">ℓ</a><a id="3514" class="Symbol">)</a> <a id="3516" class="Symbol">(</a><a id="3517" href="Cubical.Core.Primitives.html#3517" class="Bound">φ</a> <a id="3519" class="Symbol">:</a> <a id="3521" href="Agda.Primitive.Cubical.html#151" class="Datatype">I</a><a id="3522" class="Symbol">)</a> <a id="3524" class="Symbol">(</a><a id="3525" href="Cubical.Core.Primitives.html#3525" class="Bound">u</a> <a id="3527" class="Symbol">:</a> <a id="3529" href="Agda.Primitive.Cubical.html#1116" class="Primitive">Partial</a> <a id="3537" href="Cubical.Core.Primitives.html#3517" class="Bound">φ</a> <a id="3539" href="Cubical.Core.Primitives.html#3504" class="Bound">A</a><a id="3540" class="Symbol">)</a> <a id="3542" class="Symbol">→</a> <a id="3544" href="Agda.Primitive.html#429" class="Primitive">SSet</a> <a id="3549" href="Cubical.Core.Primitives.html#3500" class="Bound">ℓ</a>
<a id="3551" href="Cubical.Core.Primitives.html#3551" class="Bound">A</a> <a id="3553" href="Cubical.Core.Primitives.html#3488" class="Function Operator">[</a> <a id="3555" href="Cubical.Core.Primitives.html#3555" class="Bound">φ</a> <a id="3557" href="Cubical.Core.Primitives.html#3488" class="Function Operator">↦</a> <a id="3559" href="Cubical.Core.Primitives.html#3559" class="Bound">u</a> <a id="3561" href="Cubical.Core.Primitives.html#3488" class="Function Operator">]</a> <a id="3563" class="Symbol">=</a> <a id="3565" href="Agda.Builtin.Cubical.Sub.html#172" class="Postulate">Sub</a> <a id="3569" href="Cubical.Core.Primitives.html#3551" class="Bound">A</a> <a id="3571" href="Cubical.Core.Primitives.html#3555" class="Bound">φ</a> <a id="3573" href="Cubical.Core.Primitives.html#3559" class="Bound">u</a>

<a id="3576" class="Keyword">infix</a> <a id="3582" class="Number">4</a> <a id="3584" href="Cubical.Core.Primitives.html#3488" class="Function Operator">_[_↦_]</a>

<a id="3592" class="Comment">-- Any element u : A can be seen as an element of A [ φ ↦ u ] which</a>
<a id="3660" class="Comment">-- agrees with u on φ:</a>

<a id="3684" class="Comment">-- inS : ∀ {ℓ} {A : Type ℓ} {φ} (u : A) → A [ φ ↦ (λ _ → u) ]</a>

<a id="3747" class="Comment">-- One can also forget that an element agrees with u on φ:</a>

<a id="3807" class="Comment">-- outS : ∀ {ℓ} {A : Type ℓ} {φ : I} {u : Partial φ A} → A [ φ ↦ u ] → A</a>


<a id="3882" class="Comment">-- * Composition operation according to [CCHM 18].</a>
<a id="3933" class="Comment">-- When calling &quot;comp A φ u a&quot; Agda makes sure that &quot;a&quot; agrees with &quot;u i0&quot; on &quot;φ&quot;.</a>
<a id="4016" class="Comment">-- compCCHM : ∀ {ℓ} (A : (i : I) → Type ℓ) (φ : I) (u : ∀ i → Partial φ (A i)) (a : A i0) → A i1</a>

<a id="4114" class="Comment">-- Note: this is not recommended to use, instead use the CHM</a>
<a id="4175" class="Comment">-- primitives! The reason is that these work with HITs and produce</a>
<a id="4242" class="Comment">-- fewer empty systems.</a>


<a id="4268" class="Comment">-- * Generalized transport and homogeneous composition [CHM 18].</a>

<a id="4334" class="Comment">-- When calling &quot;transp A φ a&quot; Agda makes sure that &quot;A&quot; is constant on &quot;φ&quot; (see below).</a>
<a id="4422" class="Comment">-- transp : ∀ {ℓ} (A : I → Type ℓ) (φ : I) (a : A i0) → A i1</a>

<a id="4484" class="Comment">-- &quot;A&quot; being constant on &quot;φ&quot; means that &quot;A&quot; should be a constant function whenever the</a>
<a id="4571" class="Comment">-- constraint &quot;φ = i1&quot; is satisfied. For example:</a>
<a id="4621" class="Comment">-- - If &quot;φ&quot; is &quot;i0&quot; then &quot;A&quot; can be anything, since this condition is vacuously true.</a>
<a id="4707" class="Comment">-- - If &quot;φ&quot; is &quot;i1&quot; then &quot;A&quot; must be a constant function.</a>
<a id="4765" class="Comment">-- - If &quot;φ&quot; is some in-scope variable &quot;i&quot; then &quot;A&quot; only needs to be a constant function</a>
<a id="4853" class="Comment">--   when substituting &quot;i1&quot; for &quot;i&quot;.</a>

<a id="4891" class="Comment">-- When calling &quot;hcomp A φ u a&quot; Agda makes sure that &quot;a&quot; agrees with &quot;u i0&quot; on &quot;φ&quot;.</a>
<a id="4975" class="Comment">-- hcomp : ∀ {ℓ} {A : Type ℓ} {φ : I} (u : I → Partial φ A) (a : A) → A</a>

<a id="5048" class="Keyword">private</a>
  <a id="5058" class="Keyword">variable</a>
    <a id="5071" href="Cubical.Core.Primitives.html#5071" class="Generalizable">ℓ</a>  <a id="5074" class="Symbol">:</a> <a id="5076" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="5086" href="Cubical.Core.Primitives.html#5086" class="Generalizable">ℓ&#39;</a> <a id="5089" class="Symbol">:</a> <a id="5091" href="Agda.Primitive.Cubical.html#151" class="Datatype">I</a> <a id="5093" class="Symbol">→</a> <a id="5095" href="Agda.Primitive.html#742" class="Postulate">Level</a>

<a id="5102" class="Comment">-- Homogeneous filling</a>
<a id="hfill"></a><a id="5125" href="Cubical.Core.Primitives.html#5125" class="Function">hfill</a> <a id="5131" class="Symbol">:</a> <a id="5133" class="Symbol">{</a><a id="5134" href="Cubical.Core.Primitives.html#5134" class="Bound">A</a> <a id="5136" class="Symbol">:</a> <a id="5138" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="5143" href="Cubical.Core.Primitives.html#5071" class="Generalizable">ℓ</a><a id="5144" class="Symbol">}</a>
        <a id="5154" class="Symbol">{</a><a id="5155" href="Cubical.Core.Primitives.html#5155" class="Bound">φ</a> <a id="5157" class="Symbol">:</a> <a id="5159" href="Agda.Primitive.Cubical.html#151" class="Datatype">I</a><a id="5160" class="Symbol">}</a>
        <a id="5170" class="Symbol">(</a><a id="5171" href="Cubical.Core.Primitives.html#5171" class="Bound">u</a> <a id="5173" class="Symbol">:</a> <a id="5175" class="Symbol">∀</a> <a id="5177" href="Cubical.Core.Primitives.html#5177" class="Bound">i</a> <a id="5179" class="Symbol">→</a> <a id="5181" href="Agda.Primitive.Cubical.html#1116" class="Primitive">Partial</a> <a id="5189" href="Cubical.Core.Primitives.html#5155" class="Bound">φ</a> <a id="5191" href="Cubical.Core.Primitives.html#5134" class="Bound">A</a><a id="5192" class="Symbol">)</a>
        <a id="5202" class="Symbol">(</a><a id="5203" href="Cubical.Core.Primitives.html#5203" class="Bound">u0</a> <a id="5206" class="Symbol">:</a> <a id="5208" href="Cubical.Core.Primitives.html#5134" class="Bound">A</a> <a id="5210" href="Cubical.Core.Primitives.html#3488" class="Function Operator">[</a> <a id="5212" href="Cubical.Core.Primitives.html#5155" class="Bound">φ</a> <a id="5214" href="Cubical.Core.Primitives.html#3488" class="Function Operator">↦</a> <a id="5216" href="Cubical.Core.Primitives.html#5171" class="Bound">u</a> <a id="5218" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a> <a id="5221" href="Cubical.Core.Primitives.html#3488" class="Function Operator">]</a><a id="5222" class="Symbol">)</a>
        <a id="5232" class="Comment">-----------------------</a>
        <a id="5264" class="Symbol">(</a><a id="5265" href="Cubical.Core.Primitives.html#5265" class="Bound">i</a> <a id="5267" class="Symbol">:</a> <a id="5269" href="Agda.Primitive.Cubical.html#151" class="Datatype">I</a><a id="5270" class="Symbol">)</a> <a id="5272" class="Symbol">→</a> <a id="5274" href="Cubical.Core.Primitives.html#5134" class="Bound">A</a>
<a id="5276" href="Cubical.Core.Primitives.html#5125" class="Function">hfill</a> <a id="5282" class="Symbol">{</a><a id="5283" class="Argument">φ</a> <a id="5285" class="Symbol">=</a> <a id="5287" href="Cubical.Core.Primitives.html#5287" class="Bound">φ</a><a id="5288" class="Symbol">}</a> <a id="5290" href="Cubical.Core.Primitives.html#5290" class="Bound">u</a> <a id="5292" href="Cubical.Core.Primitives.html#5292" class="Bound">u0</a> <a id="5295" href="Cubical.Core.Primitives.html#5295" class="Bound">i</a> <a id="5297" class="Symbol">=</a>
  <a id="5301" href="Cubical.Core.Primitives.html#637" class="Primitive">hcomp</a> <a id="5307" class="Symbol">(λ</a> <a id="5310" href="Cubical.Core.Primitives.html#5310" class="Bound">j</a> <a id="5312" class="Symbol">→</a> <a id="5314" class="Symbol">λ</a> <a id="5316" class="Symbol">{</a> <a id="5318" class="Symbol">(</a><a id="5319" href="Cubical.Core.Primitives.html#5287" class="Bound">φ</a> <a id="5321" class="Symbol">=</a> <a id="5323" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a><a id="5325" class="Symbol">)</a> <a id="5327" class="Symbol">→</a> <a id="5329" href="Cubical.Core.Primitives.html#5290" class="Bound">u</a> <a id="5331" class="Symbol">(</a><a id="5332" href="Cubical.Core.Primitives.html#5295" class="Bound">i</a> <a id="5334" href="Cubical.Core.Primitives.html#421" class="Primitive Operator">∧</a> <a id="5336" href="Cubical.Core.Primitives.html#5310" class="Bound">j</a><a id="5337" class="Symbol">)</a> <a id="5339" href="Cubical.Core.Primitives.html#712" class="Postulate">1=1</a>
                 <a id="5360" class="Symbol">;</a> <a id="5362" class="Symbol">(</a><a id="5363" href="Cubical.Core.Primitives.html#5295" class="Bound">i</a> <a id="5365" class="Symbol">=</a> <a id="5367" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a><a id="5369" class="Symbol">)</a> <a id="5371" class="Symbol">→</a> <a id="5373" href="Cubical.Core.Primitives.html#342" class="Primitive">outS</a> <a id="5378" href="Cubical.Core.Primitives.html#5292" class="Bound">u0</a> <a id="5381" class="Symbol">})</a>
        <a id="5392" class="Symbol">(</a><a id="5393" href="Cubical.Core.Primitives.html#342" class="Primitive">outS</a> <a id="5398" href="Cubical.Core.Primitives.html#5292" class="Bound">u0</a><a id="5400" class="Symbol">)</a>

<a id="5403" class="Comment">-- Heterogeneous composition can defined as in CHM, however we use the</a>
<a id="5474" class="Comment">-- builtin one as it doesn&#39;t require u0 to be a cubical subtype. This</a>
<a id="5544" class="Comment">-- reduces the number of inS&#39;s a lot.</a>
<a id="5582" class="Comment">-- comp : (A : ∀ i → Type (ℓ&#39; i))</a>
<a id="5616" class="Comment">--        {φ : I}</a>
<a id="5634" class="Comment">--        (u : ∀ i → Partial φ (A i))</a>
<a id="5672" class="Comment">--        (u0 : A i0 [ φ ↦ u i0 ])</a>
<a id="5707" class="Comment">--      → ---------------------------</a>
<a id="5745" class="Comment">--        A i1</a>
<a id="5760" class="Comment">-- comp A {φ = φ} u u0 =</a>
<a id="5785" class="Comment">--   hcomp (λ i → λ { (φ = i1) → transp (λ j → A (i ∨ j)) i (u _ 1=1) })</a>
<a id="5858" class="Comment">--         (transp A i0 (outS u0))</a>

<a id="5894" class="Comment">-- Heterogeneous filling defined using comp</a>
<a id="fill"></a><a id="5938" href="Cubical.Core.Primitives.html#5938" class="Function">fill</a> <a id="5943" class="Symbol">:</a> <a id="5945" class="Symbol">(</a><a id="5946" href="Cubical.Core.Primitives.html#5946" class="Bound">A</a> <a id="5948" class="Symbol">:</a> <a id="5950" class="Symbol">∀</a> <a id="5952" href="Cubical.Core.Primitives.html#5952" class="Bound">i</a> <a id="5954" class="Symbol">→</a> <a id="5956" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="5961" class="Symbol">(</a><a id="5962" href="Cubical.Core.Primitives.html#5086" class="Generalizable">ℓ&#39;</a> <a id="5965" href="Cubical.Core.Primitives.html#5952" class="Bound">i</a><a id="5966" class="Symbol">))</a>
       <a id="5976" class="Symbol">{</a><a id="5977" href="Cubical.Core.Primitives.html#5977" class="Bound">φ</a> <a id="5979" class="Symbol">:</a> <a id="5981" href="Agda.Primitive.Cubical.html#151" class="Datatype">I</a><a id="5982" class="Symbol">}</a>
       <a id="5991" class="Symbol">(</a><a id="5992" href="Cubical.Core.Primitives.html#5992" class="Bound">u</a> <a id="5994" class="Symbol">:</a> <a id="5996" class="Symbol">∀</a> <a id="5998" href="Cubical.Core.Primitives.html#5998" class="Bound">i</a> <a id="6000" class="Symbol">→</a> <a id="6002" href="Agda.Primitive.Cubical.html#1116" class="Primitive">Partial</a> <a id="6010" href="Cubical.Core.Primitives.html#5977" class="Bound">φ</a> <a id="6012" class="Symbol">(</a><a id="6013" href="Cubical.Core.Primitives.html#5946" class="Bound">A</a> <a id="6015" href="Cubical.Core.Primitives.html#5998" class="Bound">i</a><a id="6016" class="Symbol">))</a>
       <a id="6026" class="Symbol">(</a><a id="6027" href="Cubical.Core.Primitives.html#6027" class="Bound">u0</a> <a id="6030" class="Symbol">:</a> <a id="6032" href="Cubical.Core.Primitives.html#5946" class="Bound">A</a> <a id="6034" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a> <a id="6037" href="Cubical.Core.Primitives.html#3488" class="Function Operator">[</a> <a id="6039" href="Cubical.Core.Primitives.html#5977" class="Bound">φ</a> <a id="6041" href="Cubical.Core.Primitives.html#3488" class="Function Operator">↦</a> <a id="6043" href="Cubical.Core.Primitives.html#5992" class="Bound">u</a> <a id="6045" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a> <a id="6048" href="Cubical.Core.Primitives.html#3488" class="Function Operator">]</a><a id="6049" class="Symbol">)</a>
       <a id="6058" class="Comment">---------------------------</a>
       <a id="6093" class="Symbol">(</a><a id="6094" href="Cubical.Core.Primitives.html#6094" class="Bound">i</a> <a id="6096" class="Symbol">:</a> <a id="6098" href="Agda.Primitive.Cubical.html#151" class="Datatype">I</a><a id="6099" class="Symbol">)</a> <a id="6101" class="Symbol">→</a> <a id="6103" href="Cubical.Core.Primitives.html#5946" class="Bound">A</a> <a id="6105" href="Cubical.Core.Primitives.html#6094" class="Bound">i</a>
<a id="6107" href="Cubical.Core.Primitives.html#5938" class="Function">fill</a> <a id="6112" href="Cubical.Core.Primitives.html#6112" class="Bound">A</a> <a id="6114" class="Symbol">{</a><a id="6115" class="Argument">φ</a> <a id="6117" class="Symbol">=</a> <a id="6119" href="Cubical.Core.Primitives.html#6119" class="Bound">φ</a><a id="6120" class="Symbol">}</a> <a id="6122" href="Cubical.Core.Primitives.html#6122" class="Bound">u</a> <a id="6124" href="Cubical.Core.Primitives.html#6124" class="Bound">u0</a> <a id="6127" href="Cubical.Core.Primitives.html#6127" class="Bound">i</a> <a id="6129" class="Symbol">=</a>
  <a id="6133" href="Cubical.Core.Primitives.html#601" class="Primitive">comp</a> <a id="6138" class="Symbol">(λ</a> <a id="6141" href="Cubical.Core.Primitives.html#6141" class="Bound">j</a> <a id="6143" class="Symbol">→</a> <a id="6145" href="Cubical.Core.Primitives.html#6112" class="Bound">A</a> <a id="6147" class="Symbol">(</a><a id="6148" href="Cubical.Core.Primitives.html#6127" class="Bound">i</a> <a id="6150" href="Cubical.Core.Primitives.html#421" class="Primitive Operator">∧</a> <a id="6152" href="Cubical.Core.Primitives.html#6141" class="Bound">j</a><a id="6153" class="Symbol">))</a>
       <a id="6163" class="Symbol">(λ</a> <a id="6166" href="Cubical.Core.Primitives.html#6166" class="Bound">j</a> <a id="6168" class="Symbol">→</a> <a id="6170" class="Symbol">λ</a> <a id="6172" class="Symbol">{</a> <a id="6174" class="Symbol">(</a><a id="6175" href="Cubical.Core.Primitives.html#6119" class="Bound">φ</a> <a id="6177" class="Symbol">=</a> <a id="6179" href="Agda.Primitive.Cubical.html#222" class="InductiveConstructor">i1</a><a id="6181" class="Symbol">)</a> <a id="6183" class="Symbol">→</a> <a id="6185" href="Cubical.Core.Primitives.html#6122" class="Bound">u</a> <a id="6187" class="Symbol">(</a><a id="6188" href="Cubical.Core.Primitives.html#6127" class="Bound">i</a> <a id="6190" href="Cubical.Core.Primitives.html#421" class="Primitive Operator">∧</a> <a id="6192" href="Cubical.Core.Primitives.html#6166" class="Bound">j</a><a id="6193" class="Symbol">)</a> <a id="6195" href="Cubical.Core.Primitives.html#712" class="Postulate">1=1</a>
                <a id="6215" class="Symbol">;</a> <a id="6217" class="Symbol">(</a><a id="6218" href="Cubical.Core.Primitives.html#6127" class="Bound">i</a> <a id="6220" class="Symbol">=</a> <a id="6222" href="Agda.Primitive.Cubical.html#194" class="InductiveConstructor">i0</a><a id="6224" class="Symbol">)</a> <a id="6226" class="Symbol">→</a> <a id="6228" href="Cubical.Core.Primitives.html#342" class="Primitive">outS</a> <a id="6233" href="Cubical.Core.Primitives.html#6124" class="Bound">u0</a> <a id="6236" class="Symbol">})</a>
       <a id="6246" class="Symbol">(</a><a id="6247" href="Cubical.Core.Primitives.html#342" class="Primitive">outS</a> <a id="6252" href="Cubical.Core.Primitives.html#6124" class="Bound">u0</a><a id="6254" class="Symbol">)</a>

<a id="6257" class="Comment">-- Σ-types</a>
<a id="6268" class="Keyword">infix</a> <a id="6274" class="Number">2</a> <a id="6276" href="Cubical.Core.Primitives.html#6286" class="Function">Σ-syntax</a>

<a id="Σ-syntax"></a><a id="6286" href="Cubical.Core.Primitives.html#6286" class="Function">Σ-syntax</a> <a id="6295" class="Symbol">:</a> <a id="6297" class="Symbol">∀</a> <a id="6299" class="Symbol">{</a><a id="6300" href="Cubical.Core.Primitives.html#6300" class="Bound">ℓ</a> <a id="6302" href="Cubical.Core.Primitives.html#6302" class="Bound">ℓ&#39;</a><a id="6304" class="Symbol">}</a> <a id="6306" class="Symbol">(</a><a id="6307" href="Cubical.Core.Primitives.html#6307" class="Bound">A</a> <a id="6309" class="Symbol">:</a> <a id="6311" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="6316" href="Cubical.Core.Primitives.html#6300" class="Bound">ℓ</a><a id="6317" class="Symbol">)</a> <a id="6319" class="Symbol">(</a><a id="6320" href="Cubical.Core.Primitives.html#6320" class="Bound">B</a> <a id="6322" class="Symbol">:</a> <a id="6324" href="Cubical.Core.Primitives.html#6307" class="Bound">A</a> <a id="6326" class="Symbol">→</a> <a id="6328" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="6333" href="Cubical.Core.Primitives.html#6302" class="Bound">ℓ&#39;</a><a id="6335" class="Symbol">)</a> <a id="6337" class="Symbol">→</a> <a id="6339" href="Cubical.Core.Primitives.html#1200" class="Primitive">Type</a> <a id="6344" class="Symbol">(</a><a id="6345" href="Cubical.Core.Primitives.html#1172" class="Primitive">ℓ-max</a> <a id="6351" href="Cubical.Core.Primitives.html#6300" class="Bound">ℓ</a> <a id="6353" href="Cubical.Core.Primitives.html#6302" class="Bound">ℓ&#39;</a><a id="6355" class="Symbol">)</a>
<a id="6357" href="Cubical.Core.Primitives.html#6286" class="Function">Σ-syntax</a> <a id="6366" class="Symbol">=</a> <a id="6368" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a>

<a id="6371" class="Keyword">syntax</a> <a id="6378" href="Cubical.Core.Primitives.html#6286" class="Function">Σ-syntax</a> <a id="6387" class="Bound">A</a> <a id="6389" class="Symbol">(λ</a> <a id="6392" class="Bound">x</a> <a id="6394" class="Symbol">→</a> <a id="6396" class="Bound">B</a><a id="6397" class="Symbol">)</a> <a id="6399" class="Symbol">=</a> <a id="6401" class="Function">Σ[</a> <a id="6404" class="Bound">x</a> <a id="6406" class="Function">∈</a> <a id="6408" class="Bound">A</a> <a id="6410" class="Function">]</a> <a id="6412" class="Bound">B</a>
</pre></body></html>